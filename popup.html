<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stay Filters</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; width: 280px; }
    h2 { font-size: 16px; margin-bottom: 8px; }
    .section { margin-bottom: 16px; }
    .price-inputs { display: flex; gap: 8px; }
    input[type="number"] { width: 100px; }
    .option, .checkbox { display: block; margin: 4px 0; }
    .checkbox input, .option input { margin-right: 6px; }
    .amenities-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px;
    }
    button {
      margin-top: 12px;
      padding: 6px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h2>Stay Filters</h2>

  <form id="stayFiltersForm">
    <!-- Total Price -->
    <div class="section">
      <label><strong>Total Price</strong></label>
      <div class="price-inputs">
        <input type="number" id="minPrice" name="minPrice" placeholder="Min ($)" min="0" />
        <input type="number" id="maxPrice" name="maxPrice" placeholder="Max ($)" min="0" />
      </div>
    </div>

    <!-- Stay Options -->
    <div class="section">
      <label><strong>Stay Options</strong></label>
      <label class="option"><input type="radio" name="stayOption" value="any" checked> Any</label>
      <label class="option"><input type="radio" name="stayOption" value="hotels"> Hotels</label>
      <label class="option"><input type="radio" name="stayOption" value="homes"> Homes</label>
    </div>

    <!-- Guest Rating -->
    <div class="section">
      <label><strong>Guest Rating</strong></label>
      <label class="option"><input type="radio" name="guestRating" value="any" checked> Any</label>
      <label class="option"><input type="radio" name="guestRating" value="9"> Wonderful 9+</label>
      <label class="option"><input type="radio" name="guestRating" value="8"> Very good 8+</label>
      <label class="option"><input type="radio" name="guestRating" value="7"> Good 7+</label>
    </div>

    <!-- Star Rating -->
    <div class="section">
      <label><strong>Star Rating</strong></label>
      <label class="checkbox"><input type="checkbox" name="starRating" value="5"> 5 ★</label>
      <label class="checkbox"><input type="checkbox" name="starRating" value="4"> 4 ★</label>
      <label class="checkbox"><input type="checkbox" name="starRating" value="3"> 3 ★</label>
      <label class="checkbox"><input type="checkbox" name="starRating" value="2"> 2 ★</label>
      <label class="checkbox"><input type="checkbox" name="starRating" value="1"> 1 ★</label>
    </div>

    <!-- Amenities -->
    <div class="section">
      <label><strong>Amenities</strong></label>
      <div class="amenities-grid">
        <label class="checkbox"><input type="checkbox" value="spa"> Spa</label>
        <label class="checkbox"><input type="checkbox" value="pool"> Pool</label>
        <label class="checkbox"><input type="checkbox" value="airport_shuttle"> Airport shuttle</label>
        <label class="checkbox"><input type="checkbox" value="pet_friendly"> Pet friendly</label>
        <label class="checkbox"><input type="checkbox" value="casino"> Casino</label>
        <label class="checkbox"><input type="checkbox" value="kitchen"> Kitchen</label>
        <label class="checkbox"><input type="checkbox" value="hot_tub"> Hot tub</label>
        <label class="checkbox"><input type="checkbox" value="gym"> Gym</label>
        <label class="checkbox"><input type="checkbox" value="wifi"> Wifi included</label>
        <label class="checkbox"><input type="checkbox" value="air_conditioned"> Air conditioned</label>
        <label class="checkbox"><input type="checkbox" value="restaurant"> Restaurant</label>
        <label class="checkbox"><input type="checkbox" value="golf_course"> Golf course</label>
        <label class="checkbox"><input type="checkbox" value="outdoor_space"> Outdoor space</label>
        <label class="checkbox"><input type="checkbox" value="bar"> Bar</label>
        <label class="checkbox"><input type="checkbox" value="washer_dryer"> Washer and dryer</label>
        <label class="checkbox"><input type="checkbox" value="electric_charger"> Electric car charging</label>
        <label class="checkbox"><input type="checkbox" value="water_park"> Water park</label>
        <label class="checkbox"><input type="checkbox" value="parking"> Parking</label>
        <label class="checkbox"><input type="checkbox" value="cribs"> Cribs</label>
      </div>
    </div>

    <!-- Payment Type -->
    <div class="section">
      <label><strong>Payment Type</strong></label>
      <label class="checkbox"><input type="checkbox" value="pay_later" name="paymentType"> Reserve now, pay later</label>
      <label class="checkbox"><input type="checkbox" value="gift_card" name="paymentType"> Pay with Hotels.com gift card</label>
    </div>

    <!-- Cancellation Options -->
    <div class="section">
      <label><strong>Property Cancellation</strong></label>
      <label class="checkbox"><input type="checkbox" value="fully_refundable" name="cancellation"> Fully refundable property</label>
    </div>

    <button type="submit">Apply Filters</button>
  </form>

  <script>
    document.getElementById("stayFiltersForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const stayOption = document.querySelector('input[name="stayOption"]:checked')?.value;
      const guestRating = document.querySelector('input[name="guestRating"]:checked')?.value;
      const minPrice = document.getElementById("minPrice").value || null;
      const maxPrice = document.getElementById("maxPrice").value || null;
      const starRatings = [...document.querySelectorAll('input[name="starRating"]:checked')].map(cb => cb.value);
      const amenities = [...document.querySelectorAll('.amenities-grid input:checked')].map(cb => cb.value);
      const paymentTypes = [...document.querySelectorAll('input[name="paymentType"]:checked')].map(cb => cb.value);
      const cancellation = document.querySelector('input[name="cancellation"]:checked')?.value || null;

      await chrome.storage.sync.set({
        stayFilters: {
          stayOption,
          guestRating,
          minPrice,
          maxPrice,
          starRatings,
          amenities,
          paymentTypes,
          cancellation
        }
      });

      alert("Preferences saved!");
    });
  </script>
</body>
</html>
